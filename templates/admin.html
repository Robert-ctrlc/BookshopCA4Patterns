{% extends "layout.html" %}
{% block content %}
  <h2>Admin Dashboard - {{ user['name'] }}</h2>

  <h4>Books</h4>
  <a href="{{ url_for('add_book', user_id=user['id']) }}" class="btn btn-success mb-2">Add New Book</a>
  <table class="table table-striped">
    <thead>
      <tr><th>ID</th><th>Title</th><th>Stock</th><th>Actions</th></tr>
    </thead>
    <tbody>
      {% for book in books %}
        <tr>
          <td>{{ book['id'] }}</td>
          <td>{{ book['title'] }}</td>
          <td>{{ book['stock'] }}</td>
          <td>
            <a href="{{ url_for('edit_book', book_id=book['id'], user_id=user['id']) }}" class="btn btn-sm btn-primary">Edit</a>
            <a href="{{ url_for('delete_book', book_id=book['id'], user_id=user['id']) }}" class="btn btn-sm btn-danger" onclick="return confirm('Are you sure?')">Delete</a>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

  <h4>Users</h4>
  <table class="table table-striped">
    <thead><tr><th>ID</th><th>Name</th><th>Admin?</th></tr></thead>
    <tbody>
      {% for u in users %}
        <tr><td>{{ u['id'] }}</td><td>{{ u['name'] }}</td><td>{{ 'Yes' if u['is_admin'] else 'No' }}</td></tr>
      {% endfor %}
    </tbody>
  </table>

  <h4>Orders</h4>
  <table class="table table-striped">
    <thead><tr><th>Order ID</th><th>User</th><th>Book</th><th>Qty</th></tr></thead>
    <tbody>
      {% for o in orders %}
        <tr>
          <td>{{ o['id'] }}</td>
          <td>{{ o['customer'] }}</td>
          <td>{{ o['title'] }}</td>
          <td>{{ o['quantity'] }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

  <a href="{{ url_for('book_list', user_id=user['id']) }}" class="btn btn-secondary mt-3">Back to Bookstore</a>
{% endblock %}
